## http

#### 用户

- 注册 o
- 登录 o
- 登出 o
- 修改密码
- 修改密钥 x
- 修改基本信息
- 查看好友头像 o
- 修改好友备注 o
- 查看小组头像
- 修改小组备注
- 修改组内昵称
- 查看组内成员信息(名称 头像 组内昵称)
- 查看自己的信息
- 查看自己的好友信息 o
- 查看加入了哪些组
- 查看加入的组的成员
- 发起好友申请 o
- 同意好友申请 o
- 查看待同意好友申请
- 发起小组成员邀请
- 同意加入小组
- 查看待同意小组成员邀请
- 删除好友
- 解散小组

## websocket

#### 聊天消息

- 单人文字 o
- 单人图片
- 单人文件
- 组内文字 o
- 组内图片
- 组内文件
- 组内人员变动信息

#### 推送信息

- 好友上线通知 o
- 好友下线通知 o
- 好友申请通知 o
- 好友申请同意通知 o
- 删除好友通知
- 好友密钥变动通知
- 小组解散通知


登录

判断是不是首次登录
yes
    拉取好友信息
    拉取小组信息

接收关系状态通知

拉取未读消息概要
显示未读信息数

用户点击某个好友
    拉取最近的未读消息内容 (前往最近的未读消息处) -> 拉取所有未读信息
        显示消息最近的10条信息
        向上滚动到顶 点击查看更多
            如果还有未读信息
                再次拉取
            未读消息结束
                从数据库加载10条历史消息

点击创建小组
    设置小组名 公钥

    邀请用户进入小组
        发送邀请 携带groupID

    用户同意
        发送小组私钥


收到小组邀请
    同意
        接收小组私钥



